<Window x:Class="SenYing.WPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:SenYing.WPF"
        mc:Ignorable="d"
        xmlns:model="clr-namespace:SenYing.Common.Model;assembly=SenYing.Common"
        xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
        xmlns:behaviors="clr-namespace:SenYing.WPF.Behaviors"
        xmlns:md="http://materialdesigninxaml.net/winfx/xaml/themes"
        d:DataContext="{d:DesignInstance Type=local:MainWindowViewModel, IsDesignTimeCreatable=False}"
        Style="{StaticResource MaterialDesignWindow}"
        ResizeMode="CanResizeWithGrip"
        MouseLeftButtonDown="DragWindow"
        WindowStyle="None"
        AllowsTransparency="True"
        Title="Demo App" Height="800" Width="1200">
  <Grid>
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="Auto"/>
      <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>

    <Border
      x:Name="Menu"
      Width="200"
      >
      <Grid>
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <StackPanel>
          <TextBlock Text="森影" FontSize="24" Margin="10"/>
        </StackPanel>
        <TreeView Grid.Row="1" ItemsSource="{Binding MenuItems}">
          <i:Interaction.Behaviors>
            <behaviors:TreeViewSelectedItemBehavior 
            SelectedItem="{Binding SelectedMenuItem, Mode=TwoWay}" />
          </i:Interaction.Behaviors>

          <TreeView.Resources>
            <HierarchicalDataTemplate DataType="{x:Type model:MenuItemModel}"
                                      ItemsSource="{Binding Items}">
              <StackPanel Orientation="Horizontal">
                <md:PackIcon Kind="Video"/>
                <TextBlock Text="{Binding Title}" Margin="10,0"/>
              </StackPanel>
            </HierarchicalDataTemplate>
          </TreeView.Resources>
          <TreeView.ItemsPanel>
            <ItemsPanelTemplate>
              <StackPanel />
            </ItemsPanelTemplate>
          </TreeView.ItemsPanel>
        </TreeView>
      </Grid>
    </Border>

    <Border Grid.Column="1">
      <Grid >
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <DockPanel
          LastChildFill="False">
          <Button
          Click="OpenMenu"
          DockPanel.Dock="Left"
          Style="{StaticResource MaterialDesignFlatButton}">
            <md:PackIcon Kind="Menu"/>
          </Button>
          <TextBox
            Margin="10"
            Style="{StaticResource MaterialDesignFilledTextBox}"
            x:Name="SearchTextBox"
            md:HintAssist.Hint="搜索"
            DockPanel.Dock="Left"
            Width="400"
            KeyDown="TextBox_KeyDown"
            />
          <Button
          Click="Close"
          DockPanel.Dock="Right"
          Style="{StaticResource MaterialDesignFlatButton}">
            <md:PackIcon  Kind="Close"/>
          </Button>
          <Button
          Click="WindowRestore"
          DockPanel.Dock="Right"
          Style="{StaticResource MaterialDesignFlatButton}">
            <md:PackIcon Kind="WindowRestore"/>
          </Button>
          <Button
          DockPanel.Dock="Right"
          Click="WindowMinimize"
          Style="{StaticResource MaterialDesignFlatButton}">
            <md:PackIcon Kind="WindowMinimize"/>
          </Button>
        </DockPanel>
        
        <ContentControl Grid.Row="1" Content="{Binding CurrentPage}"/>
      </Grid>
    </Border>
  </Grid>
</Window>
